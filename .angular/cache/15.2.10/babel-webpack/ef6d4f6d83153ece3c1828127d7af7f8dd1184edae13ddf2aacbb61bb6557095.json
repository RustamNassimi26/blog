{"ast":null,"code":"var _asyncToGenerator = require(\"I:/Angular/angular-blog/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nconst {\n  readFile,\n  lstat,\n  readdir\n} = require('fs/promises');\nconst parse = require('json-parse-even-better-errors');\nconst normalizePackageBin = require('npm-normalize-package-bin');\nconst {\n  resolve,\n  dirname,\n  join,\n  relative\n} = require('path');\nconst rpj = path => readFile(path, 'utf8').then(data => readBinDir(path, normalize(stripUnderscores(parse(data))))).catch(er => {\n  er.path = path;\n  throw er;\n});\n\n// load the directories.bin folder as a 'bin' object\nconst readBinDir = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (path, data) {\n    if (data.bin) {\n      return data;\n    }\n    const m = data.directories && data.directories.bin;\n    if (!m || typeof m !== 'string') {\n      return data;\n    }\n\n    // cut off any monkey business, like setting directories.bin\n    // to ../../../etc/passwd or /etc/passwd or something like that.\n    const root = dirname(path);\n    const dir = join('.', join('/', m));\n    data.bin = yield walkBinDir(root, dir, {});\n    return data;\n  });\n  return function readBinDir(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nconst walkBinDir = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(function* (root, dir, obj) {\n    const entries = yield readdir(resolve(root, dir)).catch(() => []);\n    for (const entry of entries) {\n      if (entry.charAt(0) === '.') {\n        continue;\n      }\n      const f = resolve(root, dir, entry);\n      // ignore stat errors, weird file types, symlinks, etc.\n      const st = yield lstat(f).catch(() => null);\n      if (!st) {\n        continue;\n      } else if (st.isFile()) {\n        obj[entry] = relative(root, f);\n      } else if (st.isDirectory()) {\n        yield walkBinDir(root, join(dir, entry), obj);\n      }\n    }\n    return obj;\n  });\n  return function walkBinDir(_x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\n// do not preserve _fields set in files, they are sus\nconst stripUnderscores = data => {\n  for (const key of Object.keys(data).filter(k => /^_/.test(k))) {\n    delete data[key];\n  }\n  return data;\n};\nconst normalize = data => {\n  addId(data);\n  fixBundled(data);\n  pruneRepeatedOptionals(data);\n  fixScripts(data);\n  fixFunding(data);\n  normalizePackageBin(data);\n  return data;\n};\nrpj.normalize = normalize;\nconst addId = data => {\n  if (data.name && data.version) {\n    data._id = `${data.name}@${data.version}`;\n  }\n  return data;\n};\n\n// it was once common practice to list deps both in optionalDependencies\n// and in dependencies, to support npm versions that did not know abbout\n// optionalDependencies.  This is no longer a relevant need, so duplicating\n// the deps in two places is unnecessary and excessive.\nconst pruneRepeatedOptionals = data => {\n  const od = data.optionalDependencies;\n  const dd = data.dependencies || {};\n  if (od && typeof od === 'object') {\n    for (const name of Object.keys(od)) {\n      delete dd[name];\n    }\n  }\n  if (Object.keys(dd).length === 0) {\n    delete data.dependencies;\n  }\n  return data;\n};\nconst fixBundled = data => {\n  const bdd = data.bundledDependencies;\n  const bd = data.bundleDependencies === undefined ? bdd : data.bundleDependencies;\n  if (bd === false) {\n    data.bundleDependencies = [];\n  } else if (bd === true) {\n    data.bundleDependencies = Object.keys(data.dependencies || {});\n  } else if (bd && typeof bd === 'object') {\n    if (!Array.isArray(bd)) {\n      data.bundleDependencies = Object.keys(bd);\n    } else {\n      data.bundleDependencies = bd;\n    }\n  } else {\n    delete data.bundleDependencies;\n  }\n  delete data.bundledDependencies;\n  return data;\n};\nconst fixScripts = data => {\n  if (!data.scripts || typeof data.scripts !== 'object') {\n    delete data.scripts;\n    return data;\n  }\n  for (const [name, script] of Object.entries(data.scripts)) {\n    if (typeof script !== 'string') {\n      delete data.scripts[name];\n    }\n  }\n  return data;\n};\nconst fixFunding = data => {\n  if (data.funding && typeof data.funding === 'string') {\n    data.funding = {\n      url: data.funding\n    };\n  }\n  return data;\n};\nmodule.exports = rpj;","map":{"version":3,"names":["readFile","lstat","readdir","require","parse","normalizePackageBin","resolve","dirname","join","relative","rpj","path","then","data","readBinDir","normalize","stripUnderscores","catch","er","bin","m","directories","root","dir","walkBinDir","obj","entries","entry","charAt","f","st","isFile","isDirectory","key","Object","keys","filter","k","test","addId","fixBundled","pruneRepeatedOptionals","fixScripts","fixFunding","name","version","_id","od","optionalDependencies","dd","dependencies","length","bdd","bundledDependencies","bd","bundleDependencies","undefined","Array","isArray","scripts","script","funding","url","module","exports"],"sources":["I:/Angular/angular-blog/node_modules/read-package-json-fast/lib/index.js"],"sourcesContent":["const { readFile, lstat, readdir } = require('fs/promises')\nconst parse = require('json-parse-even-better-errors')\nconst normalizePackageBin = require('npm-normalize-package-bin')\nconst { resolve, dirname, join, relative } = require('path')\n\nconst rpj = path => readFile(path, 'utf8')\n  .then(data => readBinDir(path, normalize(stripUnderscores(parse(data)))))\n  .catch(er => {\n    er.path = path\n    throw er\n  })\n\n// load the directories.bin folder as a 'bin' object\nconst readBinDir = async (path, data) => {\n  if (data.bin) {\n    return data\n  }\n\n  const m = data.directories && data.directories.bin\n  if (!m || typeof m !== 'string') {\n    return data\n  }\n\n  // cut off any monkey business, like setting directories.bin\n  // to ../../../etc/passwd or /etc/passwd or something like that.\n  const root = dirname(path)\n  const dir = join('.', join('/', m))\n  data.bin = await walkBinDir(root, dir, {})\n  return data\n}\n\nconst walkBinDir = async (root, dir, obj) => {\n  const entries = await readdir(resolve(root, dir)).catch(() => [])\n  for (const entry of entries) {\n    if (entry.charAt(0) === '.') {\n      continue\n    }\n    const f = resolve(root, dir, entry)\n    // ignore stat errors, weird file types, symlinks, etc.\n    const st = await lstat(f).catch(() => null)\n    if (!st) {\n      continue\n    } else if (st.isFile()) {\n      obj[entry] = relative(root, f)\n    } else if (st.isDirectory()) {\n      await walkBinDir(root, join(dir, entry), obj)\n    }\n  }\n  return obj\n}\n\n// do not preserve _fields set in files, they are sus\nconst stripUnderscores = data => {\n  for (const key of Object.keys(data).filter(k => /^_/.test(k))) {\n    delete data[key]\n  }\n  return data\n}\n\nconst normalize = data => {\n  addId(data)\n  fixBundled(data)\n  pruneRepeatedOptionals(data)\n  fixScripts(data)\n  fixFunding(data)\n  normalizePackageBin(data)\n  return data\n}\n\nrpj.normalize = normalize\n\nconst addId = data => {\n  if (data.name && data.version) {\n    data._id = `${data.name}@${data.version}`\n  }\n  return data\n}\n\n// it was once common practice to list deps both in optionalDependencies\n// and in dependencies, to support npm versions that did not know abbout\n// optionalDependencies.  This is no longer a relevant need, so duplicating\n// the deps in two places is unnecessary and excessive.\nconst pruneRepeatedOptionals = data => {\n  const od = data.optionalDependencies\n  const dd = data.dependencies || {}\n  if (od && typeof od === 'object') {\n    for (const name of Object.keys(od)) {\n      delete dd[name]\n    }\n  }\n  if (Object.keys(dd).length === 0) {\n    delete data.dependencies\n  }\n  return data\n}\n\nconst fixBundled = data => {\n  const bdd = data.bundledDependencies\n  const bd = data.bundleDependencies === undefined ? bdd\n    : data.bundleDependencies\n\n  if (bd === false) {\n    data.bundleDependencies = []\n  } else if (bd === true) {\n    data.bundleDependencies = Object.keys(data.dependencies || {})\n  } else if (bd && typeof bd === 'object') {\n    if (!Array.isArray(bd)) {\n      data.bundleDependencies = Object.keys(bd)\n    } else {\n      data.bundleDependencies = bd\n    }\n  } else {\n    delete data.bundleDependencies\n  }\n\n  delete data.bundledDependencies\n  return data\n}\n\nconst fixScripts = data => {\n  if (!data.scripts || typeof data.scripts !== 'object') {\n    delete data.scripts\n    return data\n  }\n\n  for (const [name, script] of Object.entries(data.scripts)) {\n    if (typeof script !== 'string') {\n      delete data.scripts[name]\n    }\n  }\n  return data\n}\n\nconst fixFunding = data => {\n  if (data.funding && typeof data.funding === 'string') {\n    data.funding = { url: data.funding }\n  }\n  return data\n}\n\nmodule.exports = rpj\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}