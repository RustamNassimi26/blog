{"ast":null,"code":"var fs = require('fs');\nvar path = require('path');\nvar {\n  glob\n} = require('glob');\nvar normalizeData = require('normalize-package-data');\nvar safeJSON = require('json-parse-even-better-errors');\nvar util = require('util');\nvar normalizePackageBin = require('npm-normalize-package-bin');\nmodule.exports = readJson;\n\n// put more stuff on here to customize.\nreadJson.extraSet = [bundleDependencies, gypfile, serverjs, scriptpath, authors, readme, mans, bins, githead, fillTypes];\nvar typoWarned = {};\nvar cache = {};\nfunction readJson(file, log_, strict_, cb_) {\n  var log, strict, cb;\n  for (var i = 1; i < arguments.length - 1; i++) {\n    if (typeof arguments[i] === 'boolean') {\n      strict = arguments[i];\n    } else if (typeof arguments[i] === 'function') {\n      log = arguments[i];\n    }\n  }\n  if (!log) {\n    log = function () {};\n  }\n  cb = arguments[arguments.length - 1];\n  readJson_(file, log, strict, cb);\n}\nfunction readJson_(file, log, strict, cb) {\n  fs.readFile(file, 'utf8', function (er, d) {\n    parseJson(file, er, d, log, strict, cb);\n  });\n}\nfunction stripBOM(content) {\n  // Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n  // because the buffer-to-string conversion in `fs.readFileSync()`\n  // translates it to FEFF, the UTF-16 BOM.\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\nfunction jsonClone(obj) {\n  if (obj == null) {\n    return obj;\n  } else if (Array.isArray(obj)) {\n    var newarr = new Array(obj.length);\n    for (var ii in obj) {\n      newarr[ii] = jsonClone(obj[ii]);\n    }\n    return newarr;\n  } else if (typeof obj === 'object') {\n    var newobj = {};\n    for (var kk in obj) {\n      newobj[kk] = jsonClone(obj[kk]);\n    }\n    return newobj;\n  } else {\n    return obj;\n  }\n}\nfunction parseJson(file, er, d, log, strict, cb) {\n  if (er && er.code === 'ENOENT') {\n    return fs.stat(path.dirname(file), function (err, stat) {\n      if (!err && stat && !stat.isDirectory()) {\n        // ENOTDIR isn't used on Windows, but npm expects it.\n        er = Object.create(er);\n        er.code = 'ENOTDIR';\n        return cb(er);\n      } else {\n        return indexjs(file, er, log, strict, cb);\n      }\n    });\n  }\n  if (er) {\n    return cb(er);\n  }\n  if (cache[d]) {\n    return cb(null, jsonClone(cache[d]));\n  }\n  var data;\n  try {\n    data = safeJSON(stripBOM(d));\n    for (var key in data) {\n      if (/^_/.test(key)) {\n        delete data[key];\n      }\n    }\n  } catch (jsonErr) {\n    data = parseIndex(d);\n    if (!data) {\n      return cb(parseError(jsonErr, file));\n    }\n  }\n  extrasCached(file, d, data, log, strict, cb);\n}\nfunction extrasCached(file, d, data, log, strict, cb) {\n  extras(file, data, log, strict, function (err, extrasData) {\n    if (!err) {\n      cache[d] = jsonClone(extrasData);\n    }\n    cb(err, extrasData);\n  });\n}\nfunction indexjs(file, er, log, strict, cb) {\n  if (path.basename(file) === 'index.js') {\n    return cb(er);\n  }\n  var index = path.resolve(path.dirname(file), 'index.js');\n  fs.readFile(index, 'utf8', function (er2, d) {\n    if (er2) {\n      return cb(er);\n    }\n    if (cache[d]) {\n      return cb(null, cache[d]);\n    }\n    var data = parseIndex(d);\n    if (!data) {\n      return cb(er);\n    }\n    extrasCached(file, d, data, log, strict, cb);\n  });\n}\nreadJson.extras = extras;\nfunction extras(file, data, log_, strict_, cb_) {\n  var log, strict, cb;\n  for (var i = 2; i < arguments.length - 1; i++) {\n    if (typeof arguments[i] === 'boolean') {\n      strict = arguments[i];\n    } else if (typeof arguments[i] === 'function') {\n      log = arguments[i];\n    }\n  }\n  if (!log) {\n    log = function () {};\n  }\n  cb = arguments[i];\n  var set = readJson.extraSet;\n  var n = set.length;\n  var errState = null;\n  set.forEach(function (fn) {\n    fn(file, data, then);\n  });\n  function then(er) {\n    if (errState) {\n      return;\n    }\n    if (er) {\n      return cb(errState = er);\n    }\n    if (--n > 0) {\n      return;\n    }\n    final(file, data, log, strict, cb);\n  }\n}\nfunction scriptpath(file, data, cb) {\n  if (!data.scripts) {\n    return cb(null, data);\n  }\n  var k = Object.keys(data.scripts);\n  k.forEach(scriptpath_, data.scripts);\n  cb(null, data);\n}\nfunction scriptpath_(key) {\n  var s = this[key];\n  // This is never allowed, and only causes problems\n  if (typeof s !== 'string') {\n    return delete this[key];\n  }\n  var spre = /^(\\.[/\\\\])?node_modules[/\\\\].bin[\\\\/]/;\n  if (s.match(spre)) {\n    this[key] = this[key].replace(spre, '');\n  }\n}\nfunction gypfile(file, data, cb) {\n  var dir = path.dirname(file);\n  var s = data.scripts || {};\n  if (s.install || s.preinstall) {\n    return cb(null, data);\n  }\n  if (data.gypfile === false) {\n    return cb(null, data);\n  }\n  glob('*.gyp', {\n    cwd: dir\n  }).then(files => gypfile_(file, data, files, cb)).catch(er => cb(er));\n}\nfunction gypfile_(file, data, files, cb) {\n  if (!files.length) {\n    return cb(null, data);\n  }\n  var s = data.scripts || {};\n  s.install = 'node-gyp rebuild';\n  data.scripts = s;\n  data.gypfile = true;\n  return cb(null, data);\n}\nfunction serverjs(file, data, cb) {\n  var dir = path.dirname(file);\n  var s = data.scripts || {};\n  if (s.start) {\n    return cb(null, data);\n  }\n  fs.access(path.join(dir, 'server.js'), err => {\n    if (!err) {\n      s.start = 'node server.js';\n      data.scripts = s;\n    }\n    return cb(null, data);\n  });\n}\nfunction authors(file, data, cb) {\n  if (data.contributors) {\n    return cb(null, data);\n  }\n  var af = path.resolve(path.dirname(file), 'AUTHORS');\n  fs.readFile(af, 'utf8', function (er, ad) {\n    // ignore error.  just checking it.\n    if (er) {\n      return cb(null, data);\n    }\n    authors_(file, data, ad, cb);\n  });\n}\nfunction authors_(file, data, ad, cb) {\n  ad = ad.split(/\\r?\\n/g).map(function (line) {\n    return line.replace(/^\\s*#.*$/, '').trim();\n  }).filter(function (line) {\n    return line;\n  });\n  data.contributors = ad;\n  return cb(null, data);\n}\nfunction readme(file, data, cb) {\n  if (data.readme) {\n    return cb(null, data);\n  }\n  var dir = path.dirname(file);\n  var globOpts = {\n    cwd: dir,\n    nocase: true,\n    mark: true\n  };\n  glob('{README,README.*}', globOpts).then(files => {\n    // don't accept directories.\n    files = files.filter(function (filtered) {\n      return !filtered.match(/\\/$/);\n    });\n    if (!files.length) {\n      return cb();\n    }\n    var fn = preferMarkdownReadme(files);\n    var rm = path.resolve(dir, fn);\n    return readme_(file, data, rm, cb);\n  }).catch(er => cb(er));\n}\nfunction preferMarkdownReadme(files) {\n  var fallback = 0;\n  var re = /\\.m?a?r?k?d?o?w?n?$/i;\n  for (var i = 0; i < files.length; i++) {\n    if (files[i].match(re)) {\n      return files[i];\n    } else if (files[i].match(/README$/)) {\n      fallback = i;\n    }\n  }\n  // prefer README.md, followed by README; otherwise, return\n  // the first filename (which could be README)\n  return files[fallback];\n}\nfunction readme_(file, data, rm, cb) {\n  var rmfn = path.basename(rm);\n  fs.readFile(rm, 'utf8', function (er, rmData) {\n    // maybe not readable, or something.\n    if (er) {\n      return cb();\n    }\n    data.readme = rmData;\n    data.readmeFilename = rmfn;\n    return cb(er, data);\n  });\n}\nfunction mans(file, data, cb) {\n  let cwd = data.directories && data.directories.man;\n  if (data.man || !cwd) {\n    return cb(null, data);\n  }\n  const dirname = path.dirname(file);\n  cwd = path.resolve(path.dirname(file), cwd);\n  glob('**/*.[0-9]', {\n    cwd\n  }).then(mansGlob => {\n    data.man = mansGlob.map(man => path.relative(dirname, path.join(cwd, man)).split(path.sep).join('/'));\n    return cb(null, data);\n  }).catch(er => cb(er));\n}\nfunction bins(file, data, cb) {\n  data = normalizePackageBin(data);\n  var m = data.directories && data.directories.bin;\n  if (data.bin || !m) {\n    return cb(null, data);\n  }\n  m = path.resolve(path.dirname(file), path.join('.', path.join('/', m)));\n  glob('**', {\n    cwd: m\n  }).then(binsGlob => bins_(file, data, binsGlob, cb)).catch(er => cb(er));\n}\nfunction bins_(file, data, binsGlob, cb) {\n  var m = data.directories && data.directories.bin || '.';\n  data.bin = binsGlob.reduce(function (acc, mf) {\n    if (mf && mf.charAt(0) !== '.') {\n      var f = path.basename(mf);\n      acc[f] = path.join(m, mf);\n    }\n    return acc;\n  }, {});\n  return cb(null, normalizePackageBin(data));\n}\nfunction bundleDependencies(file, data, cb) {\n  var bd = 'bundleDependencies';\n  var bdd = 'bundledDependencies';\n  // normalize key name\n  if (data[bdd] !== undefined) {\n    if (data[bd] === undefined) {\n      data[bd] = data[bdd];\n    }\n    delete data[bdd];\n  }\n  if (data[bd] === false) {\n    delete data[bd];\n  } else if (data[bd] === true) {\n    data[bd] = Object.keys(data.dependencies || {});\n  } else if (data[bd] !== undefined && !Array.isArray(data[bd])) {\n    delete data[bd];\n  }\n  return cb(null, data);\n}\nfunction githead(file, data, cb) {\n  if (data.gitHead) {\n    return cb(null, data);\n  }\n  var dir = path.dirname(file);\n  var head = path.resolve(dir, '.git/HEAD');\n  fs.readFile(head, 'utf8', function (er, headData) {\n    if (er) {\n      var parent = path.dirname(dir);\n      if (parent === dir) {\n        return cb(null, data);\n      }\n      return githead(dir, data, cb);\n    }\n    githead_(data, dir, headData, cb);\n  });\n}\nfunction githead_(data, dir, head, cb) {\n  if (!head.match(/^ref: /)) {\n    data.gitHead = head.trim();\n    return cb(null, data);\n  }\n  var headRef = head.replace(/^ref: /, '').trim();\n  var headFile = path.resolve(dir, '.git', headRef);\n  fs.readFile(headFile, 'utf8', function (er, headData) {\n    if (er || !headData) {\n      var packFile = path.resolve(dir, '.git/packed-refs');\n      return fs.readFile(packFile, 'utf8', function (readFileErr, refs) {\n        if (readFileErr || !refs) {\n          return cb(null, data);\n        }\n        refs = refs.split('\\n');\n        for (var i = 0; i < refs.length; i++) {\n          var match = refs[i].match(/^([0-9a-f]{40}) (.+)$/);\n          if (match && match[2].trim() === headRef) {\n            data.gitHead = match[1];\n            break;\n          }\n        }\n        return cb(null, data);\n      });\n    }\n    headData = headData.replace(/^ref: /, '').trim();\n    data.gitHead = headData;\n    return cb(null, data);\n  });\n}\n\n/**\n * Warn if the bin references don't point to anything.  This might be better in\n * normalize-package-data if it had access to the file path.\n */\nfunction checkBinReferences_(file, data, warn, cb) {\n  if (!(data.bin instanceof Object)) {\n    return cb();\n  }\n  var keys = Object.keys(data.bin);\n  var keysLeft = keys.length;\n  if (!keysLeft) {\n    return cb();\n  }\n  function handleExists(relName, result) {\n    keysLeft--;\n    if (!result) {\n      warn('No bin file found at ' + relName);\n    }\n    if (!keysLeft) {\n      cb();\n    }\n  }\n  keys.forEach(function (key) {\n    var dirName = path.dirname(file);\n    var relName = data.bin[key];\n    /* istanbul ignore if - impossible, bins have been normalized */\n    if (typeof relName !== 'string') {\n      var msg = 'Bin filename for ' + key + ' is not a string: ' + util.inspect(relName);\n      warn(msg);\n      delete data.bin[key];\n      handleExists(relName, true);\n      return;\n    }\n    var binPath = path.resolve(dirName, relName);\n    fs.stat(binPath, err => handleExists(relName, !err));\n  });\n}\nfunction final(file, data, log, strict, cb) {\n  var pId = makePackageId(data);\n  function warn(msg) {\n    if (typoWarned[pId]) {\n      return;\n    }\n    if (log) {\n      log('package.json', pId, msg);\n    }\n  }\n  try {\n    normalizeData(data, warn, strict);\n  } catch (error) {\n    return cb(error);\n  }\n  checkBinReferences_(file, data, warn, function () {\n    typoWarned[pId] = true;\n    cb(null, data);\n  });\n}\nfunction fillTypes(file, data, cb) {\n  var index = data.main || 'index.js';\n  if (typeof index !== 'string') {\n    return cb(new TypeError('The \"main\" attribute must be of type string.'));\n  }\n\n  // TODO exports is much more complicated than this in verbose format\n  // We need to support for instance\n\n  // \"exports\": {\n  //   \".\": [\n  //     {\n  //       \"default\": \"./lib/npm.js\"\n  //     },\n  //     \"./lib/npm.js\"\n  //   ],\n  //   \"./package.json\": \"./package.json\"\n  // },\n  // as well as conditional exports\n\n  // if (data.exports && typeof data.exports === 'string') {\n  //   index = data.exports\n  // }\n\n  // if (data.exports && data.exports['.']) {\n  //   index = data.exports['.']\n  //   if (typeof index !== 'string') {\n  //   }\n  // }\n\n  var extless = path.join(path.dirname(index), path.basename(index, path.extname(index)));\n  var dts = `./${extless}.d.ts`;\n  var dtsPath = path.join(path.dirname(file), dts);\n  var hasDTSFields = 'types' in data || 'typings' in data;\n  if (!hasDTSFields && fs.existsSync(dtsPath)) {\n    data.types = dts.split(path.sep).join('/');\n  }\n  cb(null, data);\n}\nfunction makePackageId(data) {\n  var name = cleanString(data.name);\n  var ver = cleanString(data.version);\n  return name + '@' + ver;\n}\nfunction cleanString(str) {\n  return !str || typeof str !== 'string' ? '' : str.trim();\n}\n\n// /**package { \"name\": \"foo\", \"version\": \"1.2.3\", ... } **/\nfunction parseIndex(data) {\n  data = data.split(/^\\/\\*\\*package(?:\\s|$)/m);\n  if (data.length < 2) {\n    return null;\n  }\n  data = data[1];\n  data = data.split(/\\*\\*\\/$/m);\n  if (data.length < 2) {\n    return null;\n  }\n  data = data[0];\n  data = data.replace(/^\\s*\\*/mg, '');\n  try {\n    return safeJSON(data);\n  } catch (er) {\n    return null;\n  }\n}\nfunction parseError(ex, file) {\n  var e = new Error('Failed to parse json\\n' + ex.message);\n  e.code = 'EJSONPARSE';\n  e.path = file;\n  return e;\n}","map":{"version":3,"names":["fs","require","path","glob","normalizeData","safeJSON","util","normalizePackageBin","module","exports","readJson","extraSet","bundleDependencies","gypfile","serverjs","scriptpath","authors","readme","mans","bins","githead","fillTypes","typoWarned","cache","file","log_","strict_","cb_","log","strict","cb","i","arguments","length","readJson_","readFile","er","d","parseJson","stripBOM","content","charCodeAt","slice","jsonClone","obj","Array","isArray","newarr","ii","newobj","kk","code","stat","dirname","err","isDirectory","Object","create","indexjs","data","key","test","jsonErr","parseIndex","parseError","extrasCached","extras","extrasData","basename","index","resolve","er2","set","n","errState","forEach","fn","then","final","scripts","k","keys","scriptpath_","s","spre","match","replace","dir","install","preinstall","cwd","files","gypfile_","catch","start","access","join","contributors","af","ad","authors_","split","map","line","trim","filter","globOpts","nocase","mark","filtered","preferMarkdownReadme","rm","readme_","fallback","re","rmfn","rmData","readmeFilename","directories","man","mansGlob","relative","sep","m","bin","binsGlob","bins_","reduce","acc","mf","charAt","f","bd","bdd","undefined","dependencies","gitHead","head","headData","parent","githead_","headRef","headFile","packFile","readFileErr","refs","checkBinReferences_","warn","keysLeft","handleExists","relName","result","dirName","msg","inspect","binPath","pId","makePackageId","error","main","TypeError","extless","extname","dts","dtsPath","hasDTSFields","existsSync","types","name","cleanString","ver","version","str","ex","e","Error","message"],"sources":["I:/Angular/angular-blog/node_modules/read-package-json/lib/read-json.js"],"sourcesContent":["var fs = require('fs')\n\nvar path = require('path')\n\nvar { glob } = require('glob')\nvar normalizeData = require('normalize-package-data')\nvar safeJSON = require('json-parse-even-better-errors')\nvar util = require('util')\nvar normalizePackageBin = require('npm-normalize-package-bin')\n\nmodule.exports = readJson\n\n// put more stuff on here to customize.\nreadJson.extraSet = [\n  bundleDependencies,\n  gypfile,\n  serverjs,\n  scriptpath,\n  authors,\n  readme,\n  mans,\n  bins,\n  githead,\n  fillTypes,\n]\n\nvar typoWarned = {}\nvar cache = {}\n\nfunction readJson (file, log_, strict_, cb_) {\n  var log, strict, cb\n  for (var i = 1; i < arguments.length - 1; i++) {\n    if (typeof arguments[i] === 'boolean') {\n      strict = arguments[i]\n    } else if (typeof arguments[i] === 'function') {\n      log = arguments[i]\n    }\n  }\n\n  if (!log) {\n    log = function () {}\n  }\n  cb = arguments[arguments.length - 1]\n\n  readJson_(file, log, strict, cb)\n}\n\nfunction readJson_ (file, log, strict, cb) {\n  fs.readFile(file, 'utf8', function (er, d) {\n    parseJson(file, er, d, log, strict, cb)\n  })\n}\n\nfunction stripBOM (content) {\n  // Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n  // because the buffer-to-string conversion in `fs.readFileSync()`\n  // translates it to FEFF, the UTF-16 BOM.\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1)\n  }\n  return content\n}\n\nfunction jsonClone (obj) {\n  if (obj == null) {\n    return obj\n  } else if (Array.isArray(obj)) {\n    var newarr = new Array(obj.length)\n    for (var ii in obj) {\n      newarr[ii] = jsonClone(obj[ii])\n    }\n    return newarr\n  } else if (typeof obj === 'object') {\n    var newobj = {}\n    for (var kk in obj) {\n      newobj[kk] = jsonClone(obj[kk])\n    }\n    return newobj\n  } else {\n    return obj\n  }\n}\n\nfunction parseJson (file, er, d, log, strict, cb) {\n  if (er && er.code === 'ENOENT') {\n    return fs.stat(path.dirname(file), function (err, stat) {\n      if (!err && stat && !stat.isDirectory()) {\n        // ENOTDIR isn't used on Windows, but npm expects it.\n        er = Object.create(er)\n        er.code = 'ENOTDIR'\n        return cb(er)\n      } else {\n        return indexjs(file, er, log, strict, cb)\n      }\n    })\n  }\n  if (er) {\n    return cb(er)\n  }\n\n  if (cache[d]) {\n    return cb(null, jsonClone(cache[d]))\n  }\n\n  var data\n\n  try {\n    data = safeJSON(stripBOM(d))\n    for (var key in data) {\n      if (/^_/.test(key)) {\n        delete data[key]\n      }\n    }\n  } catch (jsonErr) {\n    data = parseIndex(d)\n    if (!data) {\n      return cb(parseError(jsonErr, file))\n    }\n  }\n  extrasCached(file, d, data, log, strict, cb)\n}\n\nfunction extrasCached (file, d, data, log, strict, cb) {\n  extras(file, data, log, strict, function (err, extrasData) {\n    if (!err) {\n      cache[d] = jsonClone(extrasData)\n    }\n    cb(err, extrasData)\n  })\n}\n\nfunction indexjs (file, er, log, strict, cb) {\n  if (path.basename(file) === 'index.js') {\n    return cb(er)\n  }\n\n  var index = path.resolve(path.dirname(file), 'index.js')\n  fs.readFile(index, 'utf8', function (er2, d) {\n    if (er2) {\n      return cb(er)\n    }\n\n    if (cache[d]) {\n      return cb(null, cache[d])\n    }\n\n    var data = parseIndex(d)\n    if (!data) {\n      return cb(er)\n    }\n\n    extrasCached(file, d, data, log, strict, cb)\n  })\n}\n\nreadJson.extras = extras\nfunction extras (file, data, log_, strict_, cb_) {\n  var log, strict, cb\n  for (var i = 2; i < arguments.length - 1; i++) {\n    if (typeof arguments[i] === 'boolean') {\n      strict = arguments[i]\n    } else if (typeof arguments[i] === 'function') {\n      log = arguments[i]\n    }\n  }\n\n  if (!log) {\n    log = function () {}\n  }\n  cb = arguments[i]\n\n  var set = readJson.extraSet\n  var n = set.length\n  var errState = null\n  set.forEach(function (fn) {\n    fn(file, data, then)\n  })\n\n  function then (er) {\n    if (errState) {\n      return\n    }\n    if (er) {\n      return cb(errState = er)\n    }\n    if (--n > 0) {\n      return\n    }\n    final(file, data, log, strict, cb)\n  }\n}\n\nfunction scriptpath (file, data, cb) {\n  if (!data.scripts) {\n    return cb(null, data)\n  }\n  var k = Object.keys(data.scripts)\n  k.forEach(scriptpath_, data.scripts)\n  cb(null, data)\n}\n\nfunction scriptpath_ (key) {\n  var s = this[key]\n  // This is never allowed, and only causes problems\n  if (typeof s !== 'string') {\n    return delete this[key]\n  }\n\n  var spre = /^(\\.[/\\\\])?node_modules[/\\\\].bin[\\\\/]/\n  if (s.match(spre)) {\n    this[key] = this[key].replace(spre, '')\n  }\n}\n\nfunction gypfile (file, data, cb) {\n  var dir = path.dirname(file)\n  var s = data.scripts || {}\n  if (s.install || s.preinstall) {\n    return cb(null, data)\n  }\n\n  if (data.gypfile === false) {\n    return cb(null, data)\n  }\n  glob('*.gyp', { cwd: dir })\n    .then(files => gypfile_(file, data, files, cb))\n    .catch(er => cb(er))\n}\n\nfunction gypfile_ (file, data, files, cb) {\n  if (!files.length) {\n    return cb(null, data)\n  }\n  var s = data.scripts || {}\n  s.install = 'node-gyp rebuild'\n  data.scripts = s\n  data.gypfile = true\n  return cb(null, data)\n}\n\nfunction serverjs (file, data, cb) {\n  var dir = path.dirname(file)\n  var s = data.scripts || {}\n  if (s.start) {\n    return cb(null, data)\n  }\n  fs.access(path.join(dir, 'server.js'), (err) => {\n    if (!err) {\n      s.start = 'node server.js'\n      data.scripts = s\n    }\n    return cb(null, data)\n  })\n}\n\nfunction authors (file, data, cb) {\n  if (data.contributors) {\n    return cb(null, data)\n  }\n  var af = path.resolve(path.dirname(file), 'AUTHORS')\n  fs.readFile(af, 'utf8', function (er, ad) {\n    // ignore error.  just checking it.\n    if (er) {\n      return cb(null, data)\n    }\n    authors_(file, data, ad, cb)\n  })\n}\n\nfunction authors_ (file, data, ad, cb) {\n  ad = ad.split(/\\r?\\n/g).map(function (line) {\n    return line.replace(/^\\s*#.*$/, '').trim()\n  }).filter(function (line) {\n    return line\n  })\n  data.contributors = ad\n  return cb(null, data)\n}\n\nfunction readme (file, data, cb) {\n  if (data.readme) {\n    return cb(null, data)\n  }\n  var dir = path.dirname(file)\n  var globOpts = { cwd: dir, nocase: true, mark: true }\n  glob('{README,README.*}', globOpts)\n    .then(files => {\n      // don't accept directories.\n      files = files.filter(function (filtered) {\n        return !filtered.match(/\\/$/)\n      })\n      if (!files.length) {\n        return cb()\n      }\n      var fn = preferMarkdownReadme(files)\n      var rm = path.resolve(dir, fn)\n      return readme_(file, data, rm, cb)\n    })\n    .catch(er => cb(er))\n}\n\nfunction preferMarkdownReadme (files) {\n  var fallback = 0\n  var re = /\\.m?a?r?k?d?o?w?n?$/i\n  for (var i = 0; i < files.length; i++) {\n    if (files[i].match(re)) {\n      return files[i]\n    } else if (files[i].match(/README$/)) {\n      fallback = i\n    }\n  }\n  // prefer README.md, followed by README; otherwise, return\n  // the first filename (which could be README)\n  return files[fallback]\n}\n\nfunction readme_ (file, data, rm, cb) {\n  var rmfn = path.basename(rm)\n  fs.readFile(rm, 'utf8', function (er, rmData) {\n    // maybe not readable, or something.\n    if (er) {\n      return cb()\n    }\n    data.readme = rmData\n    data.readmeFilename = rmfn\n    return cb(er, data)\n  })\n}\n\nfunction mans (file, data, cb) {\n  let cwd = data.directories && data.directories.man\n  if (data.man || !cwd) {\n    return cb(null, data)\n  }\n  const dirname = path.dirname(file)\n  cwd = path.resolve(path.dirname(file), cwd)\n  glob('**/*.[0-9]', { cwd })\n    .then(mansGlob => {\n      data.man = mansGlob.map(man =>\n        path.relative(dirname, path.join(cwd, man)).split(path.sep).join('/')\n      )\n      return cb(null, data)\n    })\n    .catch(er => cb(er))\n}\n\nfunction bins (file, data, cb) {\n  data = normalizePackageBin(data)\n\n  var m = data.directories && data.directories.bin\n  if (data.bin || !m) {\n    return cb(null, data)\n  }\n\n  m = path.resolve(path.dirname(file), path.join('.', path.join('/', m)))\n  glob('**', { cwd: m })\n    .then(binsGlob => bins_(file, data, binsGlob, cb))\n    .catch(er => cb(er))\n}\n\nfunction bins_ (file, data, binsGlob, cb) {\n  var m = (data.directories && data.directories.bin) || '.'\n  data.bin = binsGlob.reduce(function (acc, mf) {\n    if (mf && mf.charAt(0) !== '.') {\n      var f = path.basename(mf)\n      acc[f] = path.join(m, mf)\n    }\n    return acc\n  }, {})\n  return cb(null, normalizePackageBin(data))\n}\n\nfunction bundleDependencies (file, data, cb) {\n  var bd = 'bundleDependencies'\n  var bdd = 'bundledDependencies'\n  // normalize key name\n  if (data[bdd] !== undefined) {\n    if (data[bd] === undefined) {\n      data[bd] = data[bdd]\n    }\n    delete data[bdd]\n  }\n  if (data[bd] === false) {\n    delete data[bd]\n  } else if (data[bd] === true) {\n    data[bd] = Object.keys(data.dependencies || {})\n  } else if (data[bd] !== undefined && !Array.isArray(data[bd])) {\n    delete data[bd]\n  }\n  return cb(null, data)\n}\n\nfunction githead (file, data, cb) {\n  if (data.gitHead) {\n    return cb(null, data)\n  }\n  var dir = path.dirname(file)\n  var head = path.resolve(dir, '.git/HEAD')\n  fs.readFile(head, 'utf8', function (er, headData) {\n    if (er) {\n      var parent = path.dirname(dir)\n      if (parent === dir) {\n        return cb(null, data)\n      }\n      return githead(dir, data, cb)\n    }\n    githead_(data, dir, headData, cb)\n  })\n}\n\nfunction githead_ (data, dir, head, cb) {\n  if (!head.match(/^ref: /)) {\n    data.gitHead = head.trim()\n    return cb(null, data)\n  }\n  var headRef = head.replace(/^ref: /, '').trim()\n  var headFile = path.resolve(dir, '.git', headRef)\n  fs.readFile(headFile, 'utf8', function (er, headData) {\n    if (er || !headData) {\n      var packFile = path.resolve(dir, '.git/packed-refs')\n      return fs.readFile(packFile, 'utf8', function (readFileErr, refs) {\n        if (readFileErr || !refs) {\n          return cb(null, data)\n        }\n        refs = refs.split('\\n')\n        for (var i = 0; i < refs.length; i++) {\n          var match = refs[i].match(/^([0-9a-f]{40}) (.+)$/)\n          if (match && match[2].trim() === headRef) {\n            data.gitHead = match[1]\n            break\n          }\n        }\n        return cb(null, data)\n      })\n    }\n    headData = headData.replace(/^ref: /, '').trim()\n    data.gitHead = headData\n    return cb(null, data)\n  })\n}\n\n/**\n * Warn if the bin references don't point to anything.  This might be better in\n * normalize-package-data if it had access to the file path.\n */\nfunction checkBinReferences_ (file, data, warn, cb) {\n  if (!(data.bin instanceof Object)) {\n    return cb()\n  }\n\n  var keys = Object.keys(data.bin)\n  var keysLeft = keys.length\n  if (!keysLeft) {\n    return cb()\n  }\n\n  function handleExists (relName, result) {\n    keysLeft--\n    if (!result) {\n      warn('No bin file found at ' + relName)\n    }\n    if (!keysLeft) {\n      cb()\n    }\n  }\n\n  keys.forEach(function (key) {\n    var dirName = path.dirname(file)\n    var relName = data.bin[key]\n    /* istanbul ignore if - impossible, bins have been normalized */\n    if (typeof relName !== 'string') {\n      var msg = 'Bin filename for ' + key +\n        ' is not a string: ' + util.inspect(relName)\n      warn(msg)\n      delete data.bin[key]\n      handleExists(relName, true)\n      return\n    }\n    var binPath = path.resolve(dirName, relName)\n    fs.stat(binPath, (err) => handleExists(relName, !err))\n  })\n}\n\nfunction final (file, data, log, strict, cb) {\n  var pId = makePackageId(data)\n\n  function warn (msg) {\n    if (typoWarned[pId]) {\n      return\n    }\n    if (log) {\n      log('package.json', pId, msg)\n    }\n  }\n\n  try {\n    normalizeData(data, warn, strict)\n  } catch (error) {\n    return cb(error)\n  }\n\n  checkBinReferences_(file, data, warn, function () {\n    typoWarned[pId] = true\n    cb(null, data)\n  })\n}\n\nfunction fillTypes (file, data, cb) {\n  var index = data.main || 'index.js'\n\n  if (typeof index !== 'string') {\n    return cb(new TypeError('The \"main\" attribute must be of type string.'))\n  }\n\n  // TODO exports is much more complicated than this in verbose format\n  // We need to support for instance\n\n  // \"exports\": {\n  //   \".\": [\n  //     {\n  //       \"default\": \"./lib/npm.js\"\n  //     },\n  //     \"./lib/npm.js\"\n  //   ],\n  //   \"./package.json\": \"./package.json\"\n  // },\n  // as well as conditional exports\n\n  // if (data.exports && typeof data.exports === 'string') {\n  //   index = data.exports\n  // }\n\n  // if (data.exports && data.exports['.']) {\n  //   index = data.exports['.']\n  //   if (typeof index !== 'string') {\n  //   }\n  // }\n\n  var extless =\n    path.join(path.dirname(index), path.basename(index, path.extname(index)))\n  var dts = `./${extless}.d.ts`\n  var dtsPath = path.join(path.dirname(file), dts)\n  var hasDTSFields = 'types' in data || 'typings' in data\n  if (!hasDTSFields && fs.existsSync(dtsPath)) {\n    data.types = dts.split(path.sep).join('/')\n  }\n\n  cb(null, data)\n}\n\nfunction makePackageId (data) {\n  var name = cleanString(data.name)\n  var ver = cleanString(data.version)\n  return name + '@' + ver\n}\n\nfunction cleanString (str) {\n  return (!str || typeof (str) !== 'string') ? '' : str.trim()\n}\n\n// /**package { \"name\": \"foo\", \"version\": \"1.2.3\", ... } **/\nfunction parseIndex (data) {\n  data = data.split(/^\\/\\*\\*package(?:\\s|$)/m)\n\n  if (data.length < 2) {\n    return null\n  }\n  data = data[1]\n  data = data.split(/\\*\\*\\/$/m)\n\n  if (data.length < 2) {\n    return null\n  }\n  data = data[0]\n  data = data.replace(/^\\s*\\*/mg, '')\n\n  try {\n    return safeJSON(data)\n  } catch (er) {\n    return null\n  }\n}\n\nfunction parseError (ex, file) {\n  var e = new Error('Failed to parse json\\n' + ex.message)\n  e.code = 'EJSONPARSE'\n  e.path = file\n  return e\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}