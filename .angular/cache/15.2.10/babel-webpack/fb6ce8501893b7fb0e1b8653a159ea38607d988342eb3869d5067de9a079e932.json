{"ast":null,"code":"import { environment } from '../../environments/environment';\nimport { map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class PostsService {\n  constructor(http) {\n    this.http = http;\n  }\n  create(post) {\n    return this.http.post(`${environment.fbDbUrl}/posts.json`, post).pipe(map(response => {\n      return {\n        ...post,\n        id: response.name,\n        date: new Date(post.date)\n      };\n    }));\n  }\n  getAll() {\n    return this.http.get(`${environment.fbDbUrl}/posts.json`).pipe(map(response => {\n      return Object.keys(response).map(key => ({\n        ...response[key],\n        id: key,\n        date: new Date(response[key].date)\n      }));\n    }));\n  }\n  getById(id) {\n    return this.http.get(`${environment.fbDbUrl}/posts/${id}.json`).pipe(map(post => {\n      return {\n        ...post,\n        id,\n        date: new Date(post.date)\n      };\n    }));\n  }\n  remove(id) {\n    return this.http.delete(`${environment.fbDbUrl}/posts/${id}.json`);\n  }\n  static #_ = this.ɵfac = function PostsService_Factory(t) {\n    return new (t || PostsService)(i0.ɵɵinject(i1.HttpClient));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: PostsService,\n    factory: PostsService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"mappings":"AAIA,SAASA,WAAW,QAAQ,gCAAgC;AAC5D,SAASC,GAAG,QAAQ,gBAAgB;;;AAGpC,OAAM,MAAOC,YAAY;EACvBC,YAAoBC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;EAAgB;EAExCC,MAAM,CAACC,IAAU;IACf,OAAO,IAAI,CAACF,IAAI,CAACE,IAAI,CAAC,GAAGN,WAAW,CAACO,OAAO,aAAa,EAAED,IAAI,CAAC,CAC7DE,IAAI,CACHP,GAAG,CAAEQ,QAA0B,IAAI;MACjC,OAAO;QACL,GAAGH,IAAI;QACPI,EAAE,EAAED,QAAQ,CAACE,IAAI;QACjBC,IAAI,EAAE,IAAIC,IAAI,CAACP,IAAI,CAACM,IAAI;OACzB;IACH,CAAC,CAAC,CAAC;EACT;EAEAE,MAAM;IACJ,OAAO,IAAI,CAACV,IAAI,CAACW,GAAG,CAAC,GAAGf,WAAW,CAACO,OAAO,aAAa,CAAC,CACtDC,IAAI,CAACP,GAAG,CAAEQ,QAA8B,IAAI;MAC3C,OAAOO,MAAM,CACVC,IAAI,CAACR,QAAQ,CAAC,CACdR,GAAG,CAACiB,GAAG,KAAK;QACX,GAAGT,QAAQ,CAACS,GAAG,CAAC;QAChBR,EAAE,EAAEQ,GAAG;QACPN,IAAI,EAAE,IAAIC,IAAI,CAACJ,QAAQ,CAACS,GAAG,CAAC,CAACN,IAAI;OAClC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC;EACP;EAEAO,OAAO,CAACT,EAAU;IAChB,OAAO,IAAI,CAACN,IAAI,CAACW,GAAG,CAAO,GAAGf,WAAW,CAACO,OAAO,UAAUG,EAAE,OAAO,CAAC,CAClEF,IAAI,CAACP,GAAG,CAAEK,IAAU,IAAI;MACvB,OAAO;QACL,GAAGA,IAAI;QAAEI,EAAE;QACXE,IAAI,EAAE,IAAIC,IAAI,CAACP,IAAI,CAACM,IAAI;OACzB;IACH,CAAC,CAAC,CAAC;EACP;EAEAQ,MAAM,CAACV,EAAU;IACf,OAAO,IAAI,CAACN,IAAI,CAACiB,MAAM,CAAO,GAAGrB,WAAW,CAACO,OAAO,UAAUG,EAAE,OAAO,CAAC;EAC1E;EAAC;qBAxCUR,YAAY;EAAA;EAAA;WAAZA,YAAY;IAAAoB,SAAZpB,YAAY;IAAAqB,YADC;EAAM","names":["environment","map","PostsService","constructor","http","create","post","fbDbUrl","pipe","response","id","name","date","Date","getAll","get","Object","keys","key","getById","remove","delete","factory","providedIn"],"sourceRoot":"","sources":["I:\\Angular\\angular-blog\\src\\app\\shared\\posts.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { FbCreateResponse, Post } from './interfaces';\r\nimport { environment } from '../../environments/environment';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class PostsService {\r\n  constructor(private http: HttpClient) { }\r\n\r\n  create(post: Post): Observable<Post> {\r\n    return this.http.post(`${environment.fbDbUrl}/posts.json`, post)\r\n      .pipe(\r\n        map((response: FbCreateResponse) => {\r\n          return {\r\n            ...post,\r\n            id: response.name,\r\n            date: new Date(post.date)\r\n          }\r\n        }))\r\n  }\r\n\r\n  getAll(): Observable<Post[]> {\r\n    return this.http.get(`${environment.fbDbUrl}/posts.json`)\r\n      .pipe(map((response: {[key: string]: any}) => {\r\n        return Object\r\n          .keys(response)\r\n          .map(key => ({\r\n            ...response[key],\r\n            id: key,\r\n            date: new Date(response[key].date)\r\n          }))\r\n      }))\r\n  }\r\n\r\n  getById(id: string): Observable<Post> {\r\n    return this.http.get<Post>(`${environment.fbDbUrl}/posts/${id}.json`)\r\n      .pipe(map((post: Post) => {\r\n        return {\r\n          ...post, id,\r\n          date: new Date(post.date)\r\n        }\r\n      }))\r\n  }\r\n\r\n  remove(id: string): Observable<void> {\r\n    return this.http.delete<void>(`${environment.fbDbUrl}/posts/${id}.json`)\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}