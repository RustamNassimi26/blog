{"ast":null,"code":"var isValidSemver = require('semver/functions/valid');\nvar cleanSemver = require('semver/functions/clean');\nvar validateLicense = require('validate-npm-package-license');\nvar hostedGitInfo = require('hosted-git-info');\nvar isBuiltinModule = require('is-core-module');\nvar depTypes = ['dependencies', 'devDependencies', 'optionalDependencies'];\nvar extractDescription = require('./extract_description');\nvar url = require('url');\nvar typos = require('./typos.json');\nvar isEmail = str => str.includes('@') && str.indexOf('@') < str.lastIndexOf('.');\nmodule.exports = {\n  // default warning function\n  warn: function () {},\n  fixRepositoryField: function (data) {\n    if (data.repositories) {\n      this.warn('repositories');\n      data.repository = data.repositories[0];\n    }\n    if (!data.repository) {\n      return this.warn('missingRepository');\n    }\n    if (typeof data.repository === 'string') {\n      data.repository = {\n        type: 'git',\n        url: data.repository\n      };\n    }\n    var r = data.repository.url || '';\n    if (r) {\n      var hosted = hostedGitInfo.fromUrl(r);\n      if (hosted) {\n        r = data.repository.url = hosted.getDefaultRepresentation() === 'shortcut' ? hosted.https() : hosted.toString();\n      }\n    }\n    if (r.match(/github.com\\/[^/]+\\/[^/]+\\.git\\.git$/)) {\n      this.warn('brokenGitUrl', r);\n    }\n  },\n  fixTypos: function (data) {\n    Object.keys(typos.topLevel).forEach(function (d) {\n      if (Object.prototype.hasOwnProperty.call(data, d)) {\n        this.warn('typo', d, typos.topLevel[d]);\n      }\n    }, this);\n  },\n  fixScriptsField: function (data) {\n    if (!data.scripts) {\n      return;\n    }\n    if (typeof data.scripts !== 'object') {\n      this.warn('nonObjectScripts');\n      delete data.scripts;\n      return;\n    }\n    Object.keys(data.scripts).forEach(function (k) {\n      if (typeof data.scripts[k] !== 'string') {\n        this.warn('nonStringScript');\n        delete data.scripts[k];\n      } else if (typos.script[k] && !data.scripts[typos.script[k]]) {\n        this.warn('typo', k, typos.script[k], 'scripts');\n      }\n    }, this);\n  },\n  fixFilesField: function (data) {\n    var files = data.files;\n    if (files && !Array.isArray(files)) {\n      this.warn('nonArrayFiles');\n      delete data.files;\n    } else if (data.files) {\n      data.files = data.files.filter(function (file) {\n        if (!file || typeof file !== 'string') {\n          this.warn('invalidFilename', file);\n          return false;\n        } else {\n          return true;\n        }\n      }, this);\n    }\n  },\n  fixBinField: function (data) {\n    if (!data.bin) {\n      return;\n    }\n    if (typeof data.bin === 'string') {\n      var b = {};\n      var match;\n      if (match = data.name.match(/^@[^/]+[/](.*)$/)) {\n        b[match[1]] = data.bin;\n      } else {\n        b[data.name] = data.bin;\n      }\n      data.bin = b;\n    }\n  },\n  fixManField: function (data) {\n    if (!data.man) {\n      return;\n    }\n    if (typeof data.man === 'string') {\n      data.man = [data.man];\n    }\n  },\n  fixBundleDependenciesField: function (data) {\n    var bdd = 'bundledDependencies';\n    var bd = 'bundleDependencies';\n    if (data[bdd] && !data[bd]) {\n      data[bd] = data[bdd];\n      delete data[bdd];\n    }\n    if (data[bd] && !Array.isArray(data[bd])) {\n      this.warn('nonArrayBundleDependencies');\n      delete data[bd];\n    } else if (data[bd]) {\n      data[bd] = data[bd].filter(function (filtered) {\n        if (!filtered || typeof filtered !== 'string') {\n          this.warn('nonStringBundleDependency', filtered);\n          return false;\n        } else {\n          if (!data.dependencies) {\n            data.dependencies = {};\n          }\n          if (!Object.prototype.hasOwnProperty.call(data.dependencies, filtered)) {\n            this.warn('nonDependencyBundleDependency', filtered);\n            data.dependencies[filtered] = '*';\n          }\n          return true;\n        }\n      }, this);\n    }\n  },\n  fixDependencies: function (data, strict) {\n    objectifyDeps(data, this.warn);\n    addOptionalDepsToDeps(data, this.warn);\n    this.fixBundleDependenciesField(data);\n    ['dependencies', 'devDependencies'].forEach(function (deps) {\n      if (!(deps in data)) {\n        return;\n      }\n      if (!data[deps] || typeof data[deps] !== 'object') {\n        this.warn('nonObjectDependencies', deps);\n        delete data[deps];\n        return;\n      }\n      Object.keys(data[deps]).forEach(function (d) {\n        var r = data[deps][d];\n        if (typeof r !== 'string') {\n          this.warn('nonStringDependency', d, JSON.stringify(r));\n          delete data[deps][d];\n        }\n        var hosted = hostedGitInfo.fromUrl(data[deps][d]);\n        if (hosted) {\n          data[deps][d] = hosted.toString();\n        }\n      }, this);\n    }, this);\n  },\n  fixModulesField: function (data) {\n    if (data.modules) {\n      this.warn('deprecatedModules');\n      delete data.modules;\n    }\n  },\n  fixKeywordsField: function (data) {\n    if (typeof data.keywords === 'string') {\n      data.keywords = data.keywords.split(/,\\s+/);\n    }\n    if (data.keywords && !Array.isArray(data.keywords)) {\n      delete data.keywords;\n      this.warn('nonArrayKeywords');\n    } else if (data.keywords) {\n      data.keywords = data.keywords.filter(function (kw) {\n        if (typeof kw !== 'string' || !kw) {\n          this.warn('nonStringKeyword');\n          return false;\n        } else {\n          return true;\n        }\n      }, this);\n    }\n  },\n  fixVersionField: function (data, strict) {\n    // allow \"loose\" semver 1.0 versions in non-strict mode\n    // enforce strict semver 2.0 compliance in strict mode\n    var loose = !strict;\n    if (!data.version) {\n      data.version = '';\n      return true;\n    }\n    if (!isValidSemver(data.version, loose)) {\n      throw new Error('Invalid version: \"' + data.version + '\"');\n    }\n    data.version = cleanSemver(data.version, loose);\n    return true;\n  },\n  fixPeople: function (data) {\n    modifyPeople(data, unParsePerson);\n    modifyPeople(data, parsePerson);\n  },\n  fixNameField: function (data, options) {\n    if (typeof options === 'boolean') {\n      options = {\n        strict: options\n      };\n    } else if (typeof options === 'undefined') {\n      options = {};\n    }\n    var strict = options.strict;\n    if (!data.name && !strict) {\n      data.name = '';\n      return;\n    }\n    if (typeof data.name !== 'string') {\n      throw new Error('name field must be a string.');\n    }\n    if (!strict) {\n      data.name = data.name.trim();\n    }\n    ensureValidName(data.name, strict, options.allowLegacyCase);\n    if (isBuiltinModule(data.name)) {\n      this.warn('conflictingName', data.name);\n    }\n  },\n  fixDescriptionField: function (data) {\n    if (data.description && typeof data.description !== 'string') {\n      this.warn('nonStringDescription');\n      delete data.description;\n    }\n    if (data.readme && !data.description) {\n      data.description = extractDescription(data.readme);\n    }\n    if (data.description === undefined) {\n      delete data.description;\n    }\n    if (!data.description) {\n      this.warn('missingDescription');\n    }\n  },\n  fixReadmeField: function (data) {\n    if (!data.readme) {\n      this.warn('missingReadme');\n      data.readme = 'ERROR: No README data found!';\n    }\n  },\n  fixBugsField: function (data) {\n    if (!data.bugs && data.repository && data.repository.url) {\n      var hosted = hostedGitInfo.fromUrl(data.repository.url);\n      if (hosted && hosted.bugs()) {\n        data.bugs = {\n          url: hosted.bugs()\n        };\n      }\n    } else if (data.bugs) {\n      if (typeof data.bugs === 'string') {\n        if (isEmail(data.bugs)) {\n          data.bugs = {\n            email: data.bugs\n          };\n          /* eslint-disable-next-line node/no-deprecated-api */\n        } else if (url.parse(data.bugs).protocol) {\n          data.bugs = {\n            url: data.bugs\n          };\n        } else {\n          this.warn('nonEmailUrlBugsString');\n        }\n      } else {\n        bugsTypos(data.bugs, this.warn);\n        var oldBugs = data.bugs;\n        data.bugs = {};\n        if (oldBugs.url) {\n          /* eslint-disable-next-line node/no-deprecated-api */\n          if (typeof oldBugs.url === 'string' && url.parse(oldBugs.url).protocol) {\n            data.bugs.url = oldBugs.url;\n          } else {\n            this.warn('nonUrlBugsUrlField');\n          }\n        }\n        if (oldBugs.email) {\n          if (typeof oldBugs.email === 'string' && isEmail(oldBugs.email)) {\n            data.bugs.email = oldBugs.email;\n          } else {\n            this.warn('nonEmailBugsEmailField');\n          }\n        }\n      }\n      if (!data.bugs.email && !data.bugs.url) {\n        delete data.bugs;\n        this.warn('emptyNormalizedBugs');\n      }\n    }\n  },\n  fixHomepageField: function (data) {\n    if (!data.homepage && data.repository && data.repository.url) {\n      var hosted = hostedGitInfo.fromUrl(data.repository.url);\n      if (hosted && hosted.docs()) {\n        data.homepage = hosted.docs();\n      }\n    }\n    if (!data.homepage) {\n      return;\n    }\n    if (typeof data.homepage !== 'string') {\n      this.warn('nonUrlHomepage');\n      return delete data.homepage;\n    }\n    /* eslint-disable-next-line node/no-deprecated-api */\n    if (!url.parse(data.homepage).protocol) {\n      data.homepage = 'http://' + data.homepage;\n    }\n  },\n  fixLicenseField: function (data) {\n    const license = data.license || data.licence;\n    if (!license) {\n      return this.warn('missingLicense');\n    }\n    if (typeof license !== 'string' || license.length < 1 || license.trim() === '') {\n      return this.warn('invalidLicense');\n    }\n    if (!validateLicense(license).validForNewPackages) {\n      return this.warn('invalidLicense');\n    }\n  }\n};\nfunction isValidScopedPackageName(spec) {\n  if (spec.charAt(0) !== '@') {\n    return false;\n  }\n  var rest = spec.slice(1).split('/');\n  if (rest.length !== 2) {\n    return false;\n  }\n  return rest[0] && rest[1] && rest[0] === encodeURIComponent(rest[0]) && rest[1] === encodeURIComponent(rest[1]);\n}\nfunction isCorrectlyEncodedName(spec) {\n  return !spec.match(/[/@\\s+%:]/) && spec === encodeURIComponent(spec);\n}\nfunction ensureValidName(name, strict, allowLegacyCase) {\n  if (name.charAt(0) === '.' || !(isValidScopedPackageName(name) || isCorrectlyEncodedName(name)) || strict && !allowLegacyCase && name !== name.toLowerCase() || name.toLowerCase() === 'node_modules' || name.toLowerCase() === 'favicon.ico') {\n    throw new Error('Invalid name: ' + JSON.stringify(name));\n  }\n}\nfunction modifyPeople(data, fn) {\n  if (data.author) {\n    data.author = fn(data.author);\n  }\n  ['maintainers', 'contributors'].forEach(function (set) {\n    if (!Array.isArray(data[set])) {\n      return;\n    }\n    data[set] = data[set].map(fn);\n  });\n  return data;\n}\nfunction unParsePerson(person) {\n  if (typeof person === 'string') {\n    return person;\n  }\n  var name = person.name || '';\n  var u = person.url || person.web;\n  var wrappedUrl = u ? ' (' + u + ')' : '';\n  var e = person.email || person.mail;\n  var wrappedEmail = e ? ' <' + e + '>' : '';\n  return name + wrappedEmail + wrappedUrl;\n}\nfunction parsePerson(person) {\n  if (typeof person !== 'string') {\n    return person;\n  }\n  var matchedName = person.match(/^([^(<]+)/);\n  var matchedUrl = person.match(/\\(([^()]+)\\)/);\n  var matchedEmail = person.match(/<([^<>]+)>/);\n  var obj = {};\n  if (matchedName && matchedName[0].trim()) {\n    obj.name = matchedName[0].trim();\n  }\n  if (matchedEmail) {\n    obj.email = matchedEmail[1];\n  }\n  if (matchedUrl) {\n    obj.url = matchedUrl[1];\n  }\n  return obj;\n}\nfunction addOptionalDepsToDeps(data, warn) {\n  var o = data.optionalDependencies;\n  if (!o) {\n    return;\n  }\n  var d = data.dependencies || {};\n  Object.keys(o).forEach(function (k) {\n    d[k] = o[k];\n  });\n  data.dependencies = d;\n}\nfunction depObjectify(deps, type, warn) {\n  if (!deps) {\n    return {};\n  }\n  if (typeof deps === 'string') {\n    deps = deps.trim().split(/[\\n\\r\\s\\t ,]+/);\n  }\n  if (!Array.isArray(deps)) {\n    return deps;\n  }\n  warn('deprecatedArrayDependencies', type);\n  var o = {};\n  deps.filter(function (d) {\n    return typeof d === 'string';\n  }).forEach(function (d) {\n    d = d.trim().split(/(:?[@\\s><=])/);\n    var dn = d.shift();\n    var dv = d.join('');\n    dv = dv.trim();\n    dv = dv.replace(/^@/, '');\n    o[dn] = dv;\n  });\n  return o;\n}\nfunction objectifyDeps(data, warn) {\n  depTypes.forEach(function (type) {\n    if (!data[type]) {\n      return;\n    }\n    data[type] = depObjectify(data[type], type, warn);\n  });\n}\nfunction bugsTypos(bugs, warn) {\n  if (!bugs) {\n    return;\n  }\n  Object.keys(bugs).forEach(function (k) {\n    if (typos.bugs[k]) {\n      warn('typo', k, typos.bugs[k], 'bugs');\n      bugs[typos.bugs[k]] = bugs[k];\n      delete bugs[k];\n    }\n  });\n}","map":{"version":3,"names":["isValidSemver","require","cleanSemver","validateLicense","hostedGitInfo","isBuiltinModule","depTypes","extractDescription","url","typos","isEmail","str","includes","indexOf","lastIndexOf","module","exports","warn","fixRepositoryField","data","repositories","repository","type","r","hosted","fromUrl","getDefaultRepresentation","https","toString","match","fixTypos","Object","keys","topLevel","forEach","d","prototype","hasOwnProperty","call","fixScriptsField","scripts","k","script","fixFilesField","files","Array","isArray","filter","file","fixBinField","bin","b","name","fixManField","man","fixBundleDependenciesField","bdd","bd","filtered","dependencies","fixDependencies","strict","objectifyDeps","addOptionalDepsToDeps","deps","JSON","stringify","fixModulesField","modules","fixKeywordsField","keywords","split","kw","fixVersionField","loose","version","Error","fixPeople","modifyPeople","unParsePerson","parsePerson","fixNameField","options","trim","ensureValidName","allowLegacyCase","fixDescriptionField","description","readme","undefined","fixReadmeField","fixBugsField","bugs","email","parse","protocol","bugsTypos","oldBugs","fixHomepageField","homepage","docs","fixLicenseField","license","licence","length","validForNewPackages","isValidScopedPackageName","spec","charAt","rest","slice","encodeURIComponent","isCorrectlyEncodedName","toLowerCase","fn","author","set","map","person","u","web","wrappedUrl","e","mail","wrappedEmail","matchedName","matchedUrl","matchedEmail","obj","o","optionalDependencies","depObjectify","dn","shift","dv","join","replace"],"sources":["I:/Angular/angular-blog/node_modules/normalize-package-data/lib/fixer.js"],"sourcesContent":["var isValidSemver = require('semver/functions/valid')\nvar cleanSemver = require('semver/functions/clean')\nvar validateLicense = require('validate-npm-package-license')\nvar hostedGitInfo = require('hosted-git-info')\nvar isBuiltinModule = require('is-core-module')\nvar depTypes = ['dependencies', 'devDependencies', 'optionalDependencies']\nvar extractDescription = require('./extract_description')\nvar url = require('url')\nvar typos = require('./typos.json')\n\nvar isEmail = str => str.includes('@') && (str.indexOf('@') < str.lastIndexOf('.'))\n\nmodule.exports = {\n  // default warning function\n  warn: function () {},\n\n  fixRepositoryField: function (data) {\n    if (data.repositories) {\n      this.warn('repositories')\n      data.repository = data.repositories[0]\n    }\n    if (!data.repository) {\n      return this.warn('missingRepository')\n    }\n    if (typeof data.repository === 'string') {\n      data.repository = {\n        type: 'git',\n        url: data.repository,\n      }\n    }\n    var r = data.repository.url || ''\n    if (r) {\n      var hosted = hostedGitInfo.fromUrl(r)\n      if (hosted) {\n        r = data.repository.url\n          = hosted.getDefaultRepresentation() === 'shortcut' ? hosted.https() : hosted.toString()\n      }\n    }\n\n    if (r.match(/github.com\\/[^/]+\\/[^/]+\\.git\\.git$/)) {\n      this.warn('brokenGitUrl', r)\n    }\n  },\n\n  fixTypos: function (data) {\n    Object.keys(typos.topLevel).forEach(function (d) {\n      if (Object.prototype.hasOwnProperty.call(data, d)) {\n        this.warn('typo', d, typos.topLevel[d])\n      }\n    }, this)\n  },\n\n  fixScriptsField: function (data) {\n    if (!data.scripts) {\n      return\n    }\n    if (typeof data.scripts !== 'object') {\n      this.warn('nonObjectScripts')\n      delete data.scripts\n      return\n    }\n    Object.keys(data.scripts).forEach(function (k) {\n      if (typeof data.scripts[k] !== 'string') {\n        this.warn('nonStringScript')\n        delete data.scripts[k]\n      } else if (typos.script[k] && !data.scripts[typos.script[k]]) {\n        this.warn('typo', k, typos.script[k], 'scripts')\n      }\n    }, this)\n  },\n\n  fixFilesField: function (data) {\n    var files = data.files\n    if (files && !Array.isArray(files)) {\n      this.warn('nonArrayFiles')\n      delete data.files\n    } else if (data.files) {\n      data.files = data.files.filter(function (file) {\n        if (!file || typeof file !== 'string') {\n          this.warn('invalidFilename', file)\n          return false\n        } else {\n          return true\n        }\n      }, this)\n    }\n  },\n\n  fixBinField: function (data) {\n    if (!data.bin) {\n      return\n    }\n    if (typeof data.bin === 'string') {\n      var b = {}\n      var match\n      if (match = data.name.match(/^@[^/]+[/](.*)$/)) {\n        b[match[1]] = data.bin\n      } else {\n        b[data.name] = data.bin\n      }\n      data.bin = b\n    }\n  },\n\n  fixManField: function (data) {\n    if (!data.man) {\n      return\n    }\n    if (typeof data.man === 'string') {\n      data.man = [data.man]\n    }\n  },\n  fixBundleDependenciesField: function (data) {\n    var bdd = 'bundledDependencies'\n    var bd = 'bundleDependencies'\n    if (data[bdd] && !data[bd]) {\n      data[bd] = data[bdd]\n      delete data[bdd]\n    }\n    if (data[bd] && !Array.isArray(data[bd])) {\n      this.warn('nonArrayBundleDependencies')\n      delete data[bd]\n    } else if (data[bd]) {\n      data[bd] = data[bd].filter(function (filtered) {\n        if (!filtered || typeof filtered !== 'string') {\n          this.warn('nonStringBundleDependency', filtered)\n          return false\n        } else {\n          if (!data.dependencies) {\n            data.dependencies = {}\n          }\n          if (!Object.prototype.hasOwnProperty.call(data.dependencies, filtered)) {\n            this.warn('nonDependencyBundleDependency', filtered)\n            data.dependencies[filtered] = '*'\n          }\n          return true\n        }\n      }, this)\n    }\n  },\n\n  fixDependencies: function (data, strict) {\n    objectifyDeps(data, this.warn)\n    addOptionalDepsToDeps(data, this.warn)\n    this.fixBundleDependenciesField(data)\n\n    ;['dependencies', 'devDependencies'].forEach(function (deps) {\n      if (!(deps in data)) {\n        return\n      }\n      if (!data[deps] || typeof data[deps] !== 'object') {\n        this.warn('nonObjectDependencies', deps)\n        delete data[deps]\n        return\n      }\n      Object.keys(data[deps]).forEach(function (d) {\n        var r = data[deps][d]\n        if (typeof r !== 'string') {\n          this.warn('nonStringDependency', d, JSON.stringify(r))\n          delete data[deps][d]\n        }\n        var hosted = hostedGitInfo.fromUrl(data[deps][d])\n        if (hosted) {\n          data[deps][d] = hosted.toString()\n        }\n      }, this)\n    }, this)\n  },\n\n  fixModulesField: function (data) {\n    if (data.modules) {\n      this.warn('deprecatedModules')\n      delete data.modules\n    }\n  },\n\n  fixKeywordsField: function (data) {\n    if (typeof data.keywords === 'string') {\n      data.keywords = data.keywords.split(/,\\s+/)\n    }\n    if (data.keywords && !Array.isArray(data.keywords)) {\n      delete data.keywords\n      this.warn('nonArrayKeywords')\n    } else if (data.keywords) {\n      data.keywords = data.keywords.filter(function (kw) {\n        if (typeof kw !== 'string' || !kw) {\n          this.warn('nonStringKeyword')\n          return false\n        } else {\n          return true\n        }\n      }, this)\n    }\n  },\n\n  fixVersionField: function (data, strict) {\n    // allow \"loose\" semver 1.0 versions in non-strict mode\n    // enforce strict semver 2.0 compliance in strict mode\n    var loose = !strict\n    if (!data.version) {\n      data.version = ''\n      return true\n    }\n    if (!isValidSemver(data.version, loose)) {\n      throw new Error('Invalid version: \"' + data.version + '\"')\n    }\n    data.version = cleanSemver(data.version, loose)\n    return true\n  },\n\n  fixPeople: function (data) {\n    modifyPeople(data, unParsePerson)\n    modifyPeople(data, parsePerson)\n  },\n\n  fixNameField: function (data, options) {\n    if (typeof options === 'boolean') {\n      options = { strict: options }\n    } else if (typeof options === 'undefined') {\n      options = {}\n    }\n    var strict = options.strict\n    if (!data.name && !strict) {\n      data.name = ''\n      return\n    }\n    if (typeof data.name !== 'string') {\n      throw new Error('name field must be a string.')\n    }\n    if (!strict) {\n      data.name = data.name.trim()\n    }\n    ensureValidName(data.name, strict, options.allowLegacyCase)\n    if (isBuiltinModule(data.name)) {\n      this.warn('conflictingName', data.name)\n    }\n  },\n\n  fixDescriptionField: function (data) {\n    if (data.description && typeof data.description !== 'string') {\n      this.warn('nonStringDescription')\n      delete data.description\n    }\n    if (data.readme && !data.description) {\n      data.description = extractDescription(data.readme)\n    }\n    if (data.description === undefined) {\n      delete data.description\n    }\n    if (!data.description) {\n      this.warn('missingDescription')\n    }\n  },\n\n  fixReadmeField: function (data) {\n    if (!data.readme) {\n      this.warn('missingReadme')\n      data.readme = 'ERROR: No README data found!'\n    }\n  },\n\n  fixBugsField: function (data) {\n    if (!data.bugs && data.repository && data.repository.url) {\n      var hosted = hostedGitInfo.fromUrl(data.repository.url)\n      if (hosted && hosted.bugs()) {\n        data.bugs = { url: hosted.bugs() }\n      }\n    } else if (data.bugs) {\n      if (typeof data.bugs === 'string') {\n        if (isEmail(data.bugs)) {\n          data.bugs = { email: data.bugs }\n        /* eslint-disable-next-line node/no-deprecated-api */\n        } else if (url.parse(data.bugs).protocol) {\n          data.bugs = { url: data.bugs }\n        } else {\n          this.warn('nonEmailUrlBugsString')\n        }\n      } else {\n        bugsTypos(data.bugs, this.warn)\n        var oldBugs = data.bugs\n        data.bugs = {}\n        if (oldBugs.url) {\n          /* eslint-disable-next-line node/no-deprecated-api */\n          if (typeof (oldBugs.url) === 'string' && url.parse(oldBugs.url).protocol) {\n            data.bugs.url = oldBugs.url\n          } else {\n            this.warn('nonUrlBugsUrlField')\n          }\n        }\n        if (oldBugs.email) {\n          if (typeof (oldBugs.email) === 'string' && isEmail(oldBugs.email)) {\n            data.bugs.email = oldBugs.email\n          } else {\n            this.warn('nonEmailBugsEmailField')\n          }\n        }\n      }\n      if (!data.bugs.email && !data.bugs.url) {\n        delete data.bugs\n        this.warn('emptyNormalizedBugs')\n      }\n    }\n  },\n\n  fixHomepageField: function (data) {\n    if (!data.homepage && data.repository && data.repository.url) {\n      var hosted = hostedGitInfo.fromUrl(data.repository.url)\n      if (hosted && hosted.docs()) {\n        data.homepage = hosted.docs()\n      }\n    }\n    if (!data.homepage) {\n      return\n    }\n\n    if (typeof data.homepage !== 'string') {\n      this.warn('nonUrlHomepage')\n      return delete data.homepage\n    }\n    /* eslint-disable-next-line node/no-deprecated-api */\n    if (!url.parse(data.homepage).protocol) {\n      data.homepage = 'http://' + data.homepage\n    }\n  },\n\n  fixLicenseField: function (data) {\n    const license = data.license || data.licence\n    if (!license) {\n      return this.warn('missingLicense')\n    }\n    if (\n      typeof (license) !== 'string' ||\n      license.length < 1 ||\n      license.trim() === ''\n    ) {\n      return this.warn('invalidLicense')\n    }\n    if (!validateLicense(license).validForNewPackages) {\n      return this.warn('invalidLicense')\n    }\n  },\n}\n\nfunction isValidScopedPackageName (spec) {\n  if (spec.charAt(0) !== '@') {\n    return false\n  }\n\n  var rest = spec.slice(1).split('/')\n  if (rest.length !== 2) {\n    return false\n  }\n\n  return rest[0] && rest[1] &&\n    rest[0] === encodeURIComponent(rest[0]) &&\n    rest[1] === encodeURIComponent(rest[1])\n}\n\nfunction isCorrectlyEncodedName (spec) {\n  return !spec.match(/[/@\\s+%:]/) &&\n    spec === encodeURIComponent(spec)\n}\n\nfunction ensureValidName (name, strict, allowLegacyCase) {\n  if (name.charAt(0) === '.' ||\n      !(isValidScopedPackageName(name) || isCorrectlyEncodedName(name)) ||\n      (strict && (!allowLegacyCase) && name !== name.toLowerCase()) ||\n      name.toLowerCase() === 'node_modules' ||\n      name.toLowerCase() === 'favicon.ico') {\n    throw new Error('Invalid name: ' + JSON.stringify(name))\n  }\n}\n\nfunction modifyPeople (data, fn) {\n  if (data.author) {\n    data.author = fn(data.author)\n  }['maintainers', 'contributors'].forEach(function (set) {\n    if (!Array.isArray(data[set])) {\n      return\n    }\n    data[set] = data[set].map(fn)\n  })\n  return data\n}\n\nfunction unParsePerson (person) {\n  if (typeof person === 'string') {\n    return person\n  }\n  var name = person.name || ''\n  var u = person.url || person.web\n  var wrappedUrl = u ? (' (' + u + ')') : ''\n  var e = person.email || person.mail\n  var wrappedEmail = e ? (' <' + e + '>') : ''\n  return name + wrappedEmail + wrappedUrl\n}\n\nfunction parsePerson (person) {\n  if (typeof person !== 'string') {\n    return person\n  }\n  var matchedName = person.match(/^([^(<]+)/)\n  var matchedUrl = person.match(/\\(([^()]+)\\)/)\n  var matchedEmail = person.match(/<([^<>]+)>/)\n  var obj = {}\n  if (matchedName && matchedName[0].trim()) {\n    obj.name = matchedName[0].trim()\n  }\n  if (matchedEmail) {\n    obj.email = matchedEmail[1]\n  }\n  if (matchedUrl) {\n    obj.url = matchedUrl[1]\n  }\n  return obj\n}\n\nfunction addOptionalDepsToDeps (data, warn) {\n  var o = data.optionalDependencies\n  if (!o) {\n    return\n  }\n  var d = data.dependencies || {}\n  Object.keys(o).forEach(function (k) {\n    d[k] = o[k]\n  })\n  data.dependencies = d\n}\n\nfunction depObjectify (deps, type, warn) {\n  if (!deps) {\n    return {}\n  }\n  if (typeof deps === 'string') {\n    deps = deps.trim().split(/[\\n\\r\\s\\t ,]+/)\n  }\n  if (!Array.isArray(deps)) {\n    return deps\n  }\n  warn('deprecatedArrayDependencies', type)\n  var o = {}\n  deps.filter(function (d) {\n    return typeof d === 'string'\n  }).forEach(function (d) {\n    d = d.trim().split(/(:?[@\\s><=])/)\n    var dn = d.shift()\n    var dv = d.join('')\n    dv = dv.trim()\n    dv = dv.replace(/^@/, '')\n    o[dn] = dv\n  })\n  return o\n}\n\nfunction objectifyDeps (data, warn) {\n  depTypes.forEach(function (type) {\n    if (!data[type]) {\n      return\n    }\n    data[type] = depObjectify(data[type], type, warn)\n  })\n}\n\nfunction bugsTypos (bugs, warn) {\n  if (!bugs) {\n    return\n  }\n  Object.keys(bugs).forEach(function (k) {\n    if (typos.bugs[k]) {\n      warn('typo', k, typos.bugs[k], 'bugs')\n      bugs[typos.bugs[k]] = bugs[k]\n      delete bugs[k]\n    }\n  })\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}