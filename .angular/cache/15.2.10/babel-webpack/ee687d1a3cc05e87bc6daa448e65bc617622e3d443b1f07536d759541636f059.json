{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _asyncToGenerator = require(\"I:/Angular/angular-blog/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NewCommandModule = void 0;\nconst command_module_1 = require(\"../../command-builder/command-module\");\nconst schematics_command_module_1 = require(\"../../command-builder/schematics-command-module\");\nconst version_1 = require(\"../../utilities/version\");\nclass NewCommandModule extends schematics_command_module_1.SchematicsCommandModule {\n  constructor() {\n    super(...arguments);\n    this.schematicName = 'ng-new';\n    this.scope = command_module_1.CommandScope.Out;\n    this.allowPrivateSchematics = true;\n    this.command = 'new [name]';\n    this.aliases = 'n';\n    this.describe = 'Creates a new Angular workspace.';\n  }\n  builder(argv) {\n    var _superprop_getBuilder = () => super.builder,\n      _this = this;\n    return _asyncToGenerator(function* () {\n      const localYargs = (yield _superprop_getBuilder().call(_this, argv)).option('collection', {\n        alias: 'c',\n        describe: 'A collection of schematics to use in generating the initial application.',\n        type: 'string'\n      });\n      const {\n        options: {\n          collection: collectionNameFromArgs\n        }\n      } = _this.context.args;\n      const collectionName = typeof collectionNameFromArgs === 'string' ? collectionNameFromArgs : yield _this.getCollectionFromConfig();\n      const workflow = yield _this.getOrCreateWorkflowForBuilder(collectionName);\n      const collection = workflow.engine.createCollection(collectionName);\n      const options = yield _this.getSchematicOptions(collection, _this.schematicName, workflow);\n      return _this.addSchemaOptionsToCommand(localYargs, options);\n    })();\n  }\n  run(options) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      var _a;\n      // Register the version of the CLI in the registry.\n      const collectionName = (_a = options.collection) !== null && _a !== void 0 ? _a : yield _this2.getCollectionFromConfig();\n      const {\n        dryRun,\n        force,\n        interactive,\n        defaults,\n        collection,\n        ...schematicOptions\n      } = options;\n      const workflow = yield _this2.getOrCreateWorkflowForExecution(collectionName, {\n        dryRun,\n        force,\n        interactive,\n        defaults\n      });\n      workflow.registry.addSmartDefaultProvider('ng-cli-version', () => version_1.VERSION.full);\n      // Compatibility check for NPM 7\n      if (collectionName === '@schematics/angular' && !schematicOptions.skipInstall && (schematicOptions.packageManager === undefined || schematicOptions.packageManager === 'npm')) {\n        _this2.context.packageManager.ensureCompatibility();\n      }\n      return _this2.runSchematic({\n        collectionName,\n        schematicName: _this2.schematicName,\n        schematicOptions,\n        executionOptions: {\n          dryRun,\n          force,\n          interactive,\n          defaults\n        }\n      });\n    })();\n  }\n  /** Find a collection from config that has an `ng-new` schematic. */\n  getCollectionFromConfig() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      for (const collectionName of yield _this3.getSchematicCollections()) {\n        const workflow = _this3.getOrCreateWorkflowForBuilder(collectionName);\n        const collection = workflow.engine.createCollection(collectionName);\n        const schematicsInCollection = collection.description.schematics;\n        if (Object.keys(schematicsInCollection).includes(_this3.schematicName)) {\n          return collectionName;\n        }\n      }\n      return schematics_command_module_1.DEFAULT_SCHEMATICS_COLLECTION;\n    })();\n  }\n}\nexports.NewCommandModule = NewCommandModule;","map":{"version":3,"names":["Object","defineProperty","exports","value","NewCommandModule","command_module_1","require","schematics_command_module_1","version_1","SchematicsCommandModule","constructor","arguments","schematicName","scope","CommandScope","Out","allowPrivateSchematics","command","aliases","describe","builder","argv","localYargs","option","alias","type","options","collection","collectionNameFromArgs","context","args","collectionName","getCollectionFromConfig","workflow","getOrCreateWorkflowForBuilder","engine","createCollection","getSchematicOptions","addSchemaOptionsToCommand","run","_a","dryRun","force","interactive","defaults","schematicOptions","getOrCreateWorkflowForExecution","registry","addSmartDefaultProvider","VERSION","full","skipInstall","packageManager","undefined","ensureCompatibility","runSchematic","executionOptions","getSchematicCollections","schematicsInCollection","description","schematics","keys","includes","DEFAULT_SCHEMATICS_COLLECTION"],"sources":["I:/Angular/angular-blog/node_modules/@angular/cli/src/commands/new/cli.js"],"sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NewCommandModule = void 0;\nconst command_module_1 = require(\"../../command-builder/command-module\");\nconst schematics_command_module_1 = require(\"../../command-builder/schematics-command-module\");\nconst version_1 = require(\"../../utilities/version\");\nclass NewCommandModule extends schematics_command_module_1.SchematicsCommandModule {\n    constructor() {\n        super(...arguments);\n        this.schematicName = 'ng-new';\n        this.scope = command_module_1.CommandScope.Out;\n        this.allowPrivateSchematics = true;\n        this.command = 'new [name]';\n        this.aliases = 'n';\n        this.describe = 'Creates a new Angular workspace.';\n    }\n    async builder(argv) {\n        const localYargs = (await super.builder(argv)).option('collection', {\n            alias: 'c',\n            describe: 'A collection of schematics to use in generating the initial application.',\n            type: 'string',\n        });\n        const { options: { collection: collectionNameFromArgs }, } = this.context.args;\n        const collectionName = typeof collectionNameFromArgs === 'string'\n            ? collectionNameFromArgs\n            : await this.getCollectionFromConfig();\n        const workflow = await this.getOrCreateWorkflowForBuilder(collectionName);\n        const collection = workflow.engine.createCollection(collectionName);\n        const options = await this.getSchematicOptions(collection, this.schematicName, workflow);\n        return this.addSchemaOptionsToCommand(localYargs, options);\n    }\n    async run(options) {\n        var _a;\n        // Register the version of the CLI in the registry.\n        const collectionName = (_a = options.collection) !== null && _a !== void 0 ? _a : (await this.getCollectionFromConfig());\n        const { dryRun, force, interactive, defaults, collection, ...schematicOptions } = options;\n        const workflow = await this.getOrCreateWorkflowForExecution(collectionName, {\n            dryRun,\n            force,\n            interactive,\n            defaults,\n        });\n        workflow.registry.addSmartDefaultProvider('ng-cli-version', () => version_1.VERSION.full);\n        // Compatibility check for NPM 7\n        if (collectionName === '@schematics/angular' &&\n            !schematicOptions.skipInstall &&\n            (schematicOptions.packageManager === undefined || schematicOptions.packageManager === 'npm')) {\n            this.context.packageManager.ensureCompatibility();\n        }\n        return this.runSchematic({\n            collectionName,\n            schematicName: this.schematicName,\n            schematicOptions,\n            executionOptions: {\n                dryRun,\n                force,\n                interactive,\n                defaults,\n            },\n        });\n    }\n    /** Find a collection from config that has an `ng-new` schematic. */\n    async getCollectionFromConfig() {\n        for (const collectionName of await this.getSchematicCollections()) {\n            const workflow = this.getOrCreateWorkflowForBuilder(collectionName);\n            const collection = workflow.engine.createCollection(collectionName);\n            const schematicsInCollection = collection.description.schematics;\n            if (Object.keys(schematicsInCollection).includes(this.schematicName)) {\n                return collectionName;\n            }\n        }\n        return schematics_command_module_1.DEFAULT_SCHEMATICS_COLLECTION;\n    }\n}\nexports.NewCommandModule = NewCommandModule;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}